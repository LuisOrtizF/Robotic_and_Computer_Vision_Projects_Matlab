<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="77,74" id="srcline74"> 74</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="77,75" id="srcline75"> 75</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S37T32U406">idxx</span> = assignClosestCorners(<span class="var type1" id="S38T35U409">cand</span>,<span class="var type1" id="S39T35U410">pred</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="77,76" id="srcline76"> 76</a></span><span class="line">   </span></span>
<span class="srcline"><span class="lineno"><a href="77,77" id="srcline77"> 77</a></span><span class="line">    <span class="comment">% return error if not enough candidates are available</span></span></span>
<span class="srcline"><span class="lineno"><a href="77,78" id="srcline78"> 78</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T10:U4"><span class="mxinfo " id="T6:U5">size(<span class="var type1" id="S38T35U416">cand</span>,1)</span>&lt;<span class="mxinfo " id="T6:U7">size(<span class="var type1" id="S39T35U420">pred</span>,1)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="77,79" id="srcline79"> 79</a></span><span class="line">      <span class="mxinfo " id="T32:U9"><span class="var type1" id="S37T32U424">idxx</span> = <span class="mxinfo " id="T6:U11">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,80" id="srcline80"> 80</a></span><span class="line">      <span class="keyword">return</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,81" id="srcline81"> 81</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="77,82" id="srcline82"> 82</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="77,83" id="srcline83"> 83</a></span><span class="line">    <span class="comment">% build distance matrix</span></span></span>
<span class="srcline"><span class="lineno"><a href="77,84" id="srcline84"> 84</a></span><span class="line">    <span class="mxinfo " id="T2:U12"><span class="var type1" id="S41T2U429">D</span> = <span class="mxinfo " id="T2:U14">zeros(<span class="mxinfo " id="T6:U15">size(<span class="var type1" id="S38T35U434">cand</span>,1)</span>,<span class="mxinfo " id="T6:U17">size(<span class="var type1" id="S39T35U438">pred</span>,1)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,85" id="srcline85"> 85</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="77,86" id="srcline86"> 86</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S43T6U442">i</span>=<span class="mxinfo " id="T6:U20">1</span>:size(<span class="var type1" id="S39T35U447">pred</span>,1)</span></span>
<span class="srcline"><span class="lineno"><a href="77,87" id="srcline87"> 87</a></span><span class="line">      <span class="mxinfo " id="T35:U22"><span class="var type1" id="S44T35U451">delta</span>  = <span class="mxinfo " id="T35:U24"><span class="var type1" id="S38T35U453">cand</span>-<span class="mxinfo " id="T35:U26"><span class="mxinfo " id="T13:U27">ones(<span class="mxinfo " id="T6:U28">size(<span class="var type1" id="S38T35U459">cand</span>,1)</span>,1)</span>*<span class="mxinfo " id="T31:U30"><span class="var type1" id="S39T35U463">pred</span>(<span class="var type1" id="S43T6U464">i</span>,<span class="mxinfo " id="T46:U33">:</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,88" id="srcline88"> 88</a></span><span class="line">      <span class="mxinfo " id="T13:U34"><span class="mxinfo " id="T13:U35"><span class="var type1" id="S41T2U469">D</span>(<span class="mxinfo " id="T47:U37">:</span>,<span class="var type1" id="S43T6U471">i</span>)</span> = <span class="mxinfo " id="T13:U39">sqrt(<span class="mxinfo " id="T13:U40"><span class="mxinfo " id="T13:U41"><span class="mxinfo " id="T13:U42"><span class="var type1" id="S44T35U477">delta</span>(<span class="mxinfo " id="T47:U44">:</span>,<span class="mxinfo " id="T16:U45">1</span>)</span>.^2</span>+<span class="mxinfo " id="T13:U46"><span class="mxinfo " id="T13:U47"><span class="var type1" id="S44T35U483">delta</span>(<span class="mxinfo " id="T47:U49">:</span>,<span class="mxinfo " id="T16:U50">2</span>)</span>.^2</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,89" id="srcline89"> 89</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="77,90" id="srcline90"> 90</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="77,91" id="srcline91"> 91</a></span><span class="line">    <span class="mxinfo " id="T32:U51"><span class="var type1" id="S37T32U489">idxx</span>=<span class="mxinfo " id="T32:U53">zeros(<span class="mxinfo " id="T6:U54">1</span>,<span class="mxinfo " id="T6:U55">size(<span class="var type1" id="S39T35U495">pred</span>,1)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,92" id="srcline92"> 92</a></span><span class="line">    coder.varsize(<span class="string">'idxx'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="77,93" id="srcline93"> 93</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="77,94" id="srcline94"> 94</a></span><span class="line">    <span class="comment">% search greedily for closest corners</span></span></span>
<span class="srcline"><span class="lineno"><a href="77,95" id="srcline95"> 95</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S43T6U505">i</span>=<span class="mxinfo " id="T6:U58">1</span>:size(<span class="var type1" id="S39T35U510">pred</span>,1)</span></span>
<span class="srcline"><span class="lineno"><a href="77,96" id="srcline96"> 96</a></span><span class="line">      [<span class="var type1" id="S48T13U515">row</span>, <span class="var type1" id="S49T13U516">col</span>] = find(<span class="mxinfo " id="T45:U62"><span class="var type1" id="S41T2U520">D</span>==<span class="mxinfo " id="T6:U64">min(<span class="mxinfo " id="T13:U65"><span class="var type1" id="S41T2U524">D</span>(:)</span>)</span></span>,1,<span class="string">'first'</span>); <span class="comment">%Locate the first one nonzero. </span></span></span>
<span class="srcline"><span class="lineno"><a href="77,97" id="srcline97"> 97</a></span><span class="line">      </span></span>
<span class="srcline"><span class="lineno"><a href="77,98" id="srcline98"> 98</a></span><span class="line">      <span class="mxinfo " id="T13:U67"><span class="mxinfo " id="T13:U68"><span class="var type1" id="S37T32U531">idxx</span>(<span class="var type1" id="S49T13U532">col</span>)</span>  = <span class="var type1" id="S48T13U533">row</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,99" id="srcline99"> 99</a></span><span class="line">      <span class="mxinfo " id="T2:U72"><span class="mxinfo " id="T2:U73"><span class="var type1" id="S41T2U537">D</span>(<span class="var type1" id="S48T13U538">row</span>,<span class="mxinfo " id="T47:U76">:</span>)</span>  = <span class="mxinfo " id="T6:U77">inf</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="77,100" id="srcline100">100</a></span><span class="line">      <span class="mxinfo " id="T2:U78"><span class="mxinfo " id="T2:U79"><span class="var type1" id="S41T2U545">D</span>(<span class="mxinfo " id="T47:U81">:</span>,<span class="var type1" id="S49T13U547">col</span>)</span>  = <span class="mxinfo " id="T6:U83">inf</span></span>;      </span></span>
<span class="srcline"><span class="lineno"><a href="77,101" id="srcline101">101</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="77,102" id="srcline102">102</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
