<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="116,74" id="srcline74"> 74</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="116,75" id="srcline75"> 75</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S37T98U406">idxx</span> = assignClosestCorners(<span class="var type1" id="S38T1U409">cand</span>,<span class="var type1" id="S39T75U410">pred</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="116,76" id="srcline76"> 76</a></span><span class="line">   </span></span>
<span class="srcline"><span class="lineno"><a href="116,77" id="srcline77"> 77</a></span><span class="line">    <span class="comment">% return error if not enough candidates are available</span></span></span>
<span class="srcline"><span class="lineno"><a href="116,78" id="srcline78"> 78</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T7:U4"><span class="mxinfo " id="T5:U5">size(<span class="var type1" id="S38T1U416">cand</span>,1)</span>&lt;<span class="mxinfo " id="T5:U7">size(<span class="var type1" id="S39T75U420">pred</span>,1)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="116,79" id="srcline79"> 79</a></span><span class="line">      <span class="mxinfo " id="T98:U9"><span class="var type1" id="S37T98U424">idxx</span> = <span class="mxinfo " id="T5:U11">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="116,80" id="srcline80"> 80</a></span><span class="line">      <span class="keyword">return</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="116,81" id="srcline81"> 81</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="116,82" id="srcline82"> 82</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="116,83" id="srcline83"> 83</a></span><span class="line">    <span class="comment">% build distance matrix</span></span></span>
<span class="srcline"><span class="lineno"><a href="116,84" id="srcline84"> 84</a></span><span class="line">    <span class="mxinfo " id="T1:U12"><span class="var type1" id="S41T1U429">D</span> = <span class="mxinfo " id="T1:U14">zeros(<span class="mxinfo " id="T5:U15">size(<span class="var type1" id="S38T1U434">cand</span>,1)</span>,<span class="mxinfo " id="T5:U17">size(<span class="var type1" id="S39T75U438">pred</span>,1)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="116,85" id="srcline85"> 85</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="116,86" id="srcline86"> 86</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S43T5U442">i</span>=<span class="mxinfo " id="T5:U20">1</span>:size(<span class="var type1" id="S39T75U447">pred</span>,1)</span></span>
<span class="srcline"><span class="lineno"><a href="116,87" id="srcline87"> 87</a></span><span class="line">      <span class="mxinfo " id="T75:U22"><span class="var type1" id="S44T75U451">delta</span>  = <span class="mxinfo " id="T75:U24"><span class="var type1" id="S38T1U453">cand</span>-<span class="mxinfo " id="T75:U26"><span class="mxinfo " id="T4:U27">ones(<span class="mxinfo " id="T5:U28">size(<span class="var type1" id="S38T1U459">cand</span>,1)</span>,1)</span>*<span class="mxinfo " id="T46:U30"><span class="var type1" id="S39T75U463">pred</span>(<span class="var type1" id="S43T5U464">i</span>,<span class="mxinfo " id="T42:U33">:</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="116,88" id="srcline88"> 88</a></span><span class="line">      <span class="mxinfo " id="T4:U34"><span class="mxinfo " id="T4:U35"><span class="var type1" id="S41T1U469">D</span>(<span class="mxinfo " id="T86:U37">:</span>,<span class="var type1" id="S43T5U471">i</span>)</span> = <span class="mxinfo " id="T4:U39">sqrt(<span class="mxinfo " id="T4:U40"><span class="mxinfo " id="T4:U41"><span class="mxinfo " id="T4:U42"><span class="var type1" id="S44T75U477">delta</span>(<span class="mxinfo " id="T86:U44">:</span>,<span class="mxinfo " id="T26:U45">1</span>)</span>.^2</span>+<span class="mxinfo " id="T4:U46"><span class="mxinfo " id="T4:U47"><span class="var type1" id="S44T75U483">delta</span>(<span class="mxinfo " id="T86:U49">:</span>,<span class="mxinfo " id="T26:U50">2</span>)</span>.^2</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="116,89" id="srcline89"> 89</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="116,90" id="srcline90"> 90</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="116,91" id="srcline91"> 91</a></span><span class="line">    <span class="mxinfo " id="T98:U51"><span class="var type1" id="S37T98U489">idxx</span>=<span class="mxinfo " id="T98:U53">zeros(<span class="mxinfo " id="T5:U54">1</span>,<span class="mxinfo " id="T5:U55">size(<span class="var type1" id="S39T75U495">pred</span>,1)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="116,92" id="srcline92"> 92</a></span><span class="line">    coder.varsize(<span class="string">'idxx'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="116,93" id="srcline93"> 93</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="116,94" id="srcline94"> 94</a></span><span class="line">    <span class="comment">% search greedily for closest corners</span></span></span>
<span class="srcline"><span class="lineno"><a href="116,95" id="srcline95"> 95</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S43T5U505">i</span>=<span class="mxinfo " id="T5:U58">1</span>:size(<span class="var type1" id="S39T75U510">pred</span>,1)</span></span>
<span class="srcline"><span class="lineno"><a href="116,96" id="srcline96"> 96</a></span><span class="line">      [<span class="var type1" id="S48T4U515">row</span>, <span class="var type1" id="S49T4U516">col</span>] = find(<span class="mxinfo " id="T115:U62"><span class="var type1" id="S41T1U520">D</span>==<span class="mxinfo " id="T5:U64">min(<span class="mxinfo " id="T4:U65"><span class="var type1" id="S41T1U524">D</span>(:)</span>)</span></span>,1,<span class="string">'first'</span>); <span class="comment">%Locate the first one nonzero. </span></span></span>
<span class="srcline"><span class="lineno"><a href="116,97" id="srcline97"> 97</a></span><span class="line">      </span></span>
<span class="srcline"><span class="lineno"><a href="116,98" id="srcline98"> 98</a></span><span class="line">      <span class="mxinfo " id="T4:U67"><span class="mxinfo " id="T4:U68"><span class="var type1" id="S37T98U531">idxx</span>(<span class="var type1" id="S49T4U532">col</span>)</span>  = <span class="var type1" id="S48T4U533">row</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="116,99" id="srcline99"> 99</a></span><span class="line">      <span class="mxinfo " id="T1:U72"><span class="mxinfo " id="T1:U73"><span class="var type1" id="S41T1U537">D</span>(<span class="var type1" id="S48T4U538">row</span>,<span class="mxinfo " id="T86:U76">:</span>)</span>  = <span class="mxinfo " id="T5:U77">inf</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="116,100" id="srcline100">100</a></span><span class="line">      <span class="mxinfo " id="T1:U78"><span class="mxinfo " id="T1:U79"><span class="var type1" id="S41T1U545">D</span>(<span class="mxinfo " id="T86:U81">:</span>,<span class="var type1" id="S49T4U547">col</span>)</span>  = <span class="mxinfo " id="T5:U83">inf</span></span>;      </span></span>
<span class="srcline"><span class="lineno"><a href="116,101" id="srcline101">101</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="116,102" id="srcline102">102</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
