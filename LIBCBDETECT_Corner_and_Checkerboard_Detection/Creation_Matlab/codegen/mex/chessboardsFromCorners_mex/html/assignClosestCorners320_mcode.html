<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="78,74" id="srcline74"> 74</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="78,75" id="srcline75"> 75</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S37T38U406">idxx</span> = assignClosestCorners(<span class="var type1" id="S38T55U409">cand</span>,<span class="var type1" id="S39T40U410">pred</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="78,76" id="srcline76"> 76</a></span><span class="line">   </span></span>
<span class="srcline"><span class="lineno"><a href="78,77" id="srcline77"> 77</a></span><span class="line">    <span class="comment">% return error if not enough candidates are available</span></span></span>
<span class="srcline"><span class="lineno"><a href="78,78" id="srcline78"> 78</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T12:U4"><span class="mxinfo " id="T6:U5">size(<span class="var type1" id="S38T55U416">cand</span>,1)</span>&lt;<span class="mxinfo " id="T6:U7">size(<span class="var type1" id="S39T40U420">pred</span>,1)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="78,79" id="srcline79"> 79</a></span><span class="line">      <span class="mxinfo " id="T38:U9"><span class="var type1" id="S37T38U424">idxx</span> = <span class="mxinfo " id="T6:U11">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="78,80" id="srcline80"> 80</a></span><span class="line">      <span class="keyword">return</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="78,81" id="srcline81"> 81</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="78,82" id="srcline82"> 82</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="78,83" id="srcline83"> 83</a></span><span class="line">    <span class="comment">% build distance matrix</span></span></span>
<span class="srcline"><span class="lineno"><a href="78,84" id="srcline84"> 84</a></span><span class="line">    <span class="mxinfo " id="T94:U12"><span class="var type1" id="S41T94U429">D</span> = <span class="mxinfo " id="T94:U14">zeros(<span class="mxinfo " id="T6:U15">size(<span class="var type1" id="S38T55U434">cand</span>,1)</span>,<span class="mxinfo " id="T6:U17">size(<span class="var type1" id="S39T40U438">pred</span>,1)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="78,85" id="srcline85"> 85</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="78,86" id="srcline86"> 86</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S43T6U442">i</span>=<span class="mxinfo " id="T6:U20">1</span>:size(<span class="var type1" id="S39T40U447">pred</span>,1)</span></span>
<span class="srcline"><span class="lineno"><a href="78,87" id="srcline87"> 87</a></span><span class="line">      <span class="mxinfo " id="T55:U22"><span class="var type1" id="S44T55U451">delta</span>  = <span class="mxinfo " id="T55:U24"><span class="var type1" id="S38T55U453">cand</span>-<span class="mxinfo " id="T40:U26"><span class="mxinfo " id="T51:U27">ones(<span class="mxinfo " id="T6:U28">size(<span class="var type1" id="S38T55U459">cand</span>,1)</span>,1)</span>*<span class="mxinfo " id="T35:U30"><span class="var type1" id="S39T40U463">pred</span>(<span class="var type1" id="S43T6U464">i</span>,<span class="mxinfo " id="T56:U33">:</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="78,88" id="srcline88"> 88</a></span><span class="line">      <span class="mxinfo " id="T51:U34"><span class="mxinfo " id="T51:U35"><span class="var type1" id="S41T94U469">D</span>(<span class="mxinfo " id="T57:U37">:</span>,<span class="var type1" id="S43T6U471">i</span>)</span> = <span class="mxinfo " id="T15:U39">sqrt(<span class="mxinfo " id="T51:U40"><span class="mxinfo " id="T15:U41"><span class="mxinfo " id="T51:U42"><span class="var type1" id="S44T55U477">delta</span>(<span class="mxinfo " id="T57:U44">:</span>,<span class="mxinfo " id="T18:U45">1</span>)</span>.^2</span>+<span class="mxinfo " id="T15:U46"><span class="mxinfo " id="T51:U47"><span class="var type1" id="S44T55U483">delta</span>(<span class="mxinfo " id="T57:U49">:</span>,<span class="mxinfo " id="T18:U50">2</span>)</span>.^2</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="78,89" id="srcline89"> 89</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="78,90" id="srcline90"> 90</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="78,91" id="srcline91"> 91</a></span><span class="line">    <span class="mxinfo " id="T38:U51"><span class="var type1" id="S37T38U489">idxx</span>=<span class="mxinfo " id="T38:U53">zeros(<span class="mxinfo " id="T6:U54">1</span>,<span class="mxinfo " id="T6:U55">size(<span class="var type1" id="S39T40U495">pred</span>,1)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="78,92" id="srcline92"> 92</a></span><span class="line">    coder.varsize(<span class="string">'idxx'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="78,93" id="srcline93"> 93</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="78,94" id="srcline94"> 94</a></span><span class="line">    <span class="comment">% search greedily for closest corners</span></span></span>
<span class="srcline"><span class="lineno"><a href="78,95" id="srcline95"> 95</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S43T6U505">i</span>=<span class="mxinfo " id="T6:U58">1</span>:size(<span class="var type1" id="S39T40U510">pred</span>,1)</span></span>
<span class="srcline"><span class="lineno"><a href="78,96" id="srcline96"> 96</a></span><span class="line">      [<span class="var type1" id="S48T93U515">row</span>, <span class="var type1" id="S49T93U516">col</span>] = find(<span class="mxinfo " id="T86:U62"><span class="var type1" id="S41T94U520">D</span>==<span class="mxinfo " id="T6:U64">min(<span class="mxinfo " id="T50:U65"><span class="var type1" id="S41T94U524">D</span>(:)</span>)</span></span>,1,<span class="string">'first'</span>); <span class="comment">%Locate the first one nonzero. </span></span></span>
<span class="srcline"><span class="lineno"><a href="78,97" id="srcline97"> 97</a></span><span class="line">      </span></span>
<span class="srcline"><span class="lineno"><a href="78,98" id="srcline98"> 98</a></span><span class="line">      <span class="mxinfo " id="T93:U67"><span class="mxinfo " id="T93:U68"><span class="var type1" id="S37T38U531">idxx</span>(<span class="var type1" id="S49T93U532">col</span>)</span>  = <span class="var type1" id="S48T93U533">row</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="78,99" id="srcline99"> 99</a></span><span class="line">      <span class="mxinfo " id="T95:U72"><span class="mxinfo " id="T95:U73"><span class="var type1" id="S41T94U537">D</span>(<span class="var type1" id="S48T93U538">row</span>,<span class="mxinfo " id="T57:U76">:</span>)</span>  = <span class="mxinfo " id="T6:U77">inf</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="78,100" id="srcline100">100</a></span><span class="line">      <span class="mxinfo " id="T96:U78"><span class="mxinfo " id="T96:U79"><span class="var type1" id="S41T94U545">D</span>(<span class="mxinfo " id="T57:U81">:</span>,<span class="var type1" id="S49T93U547">col</span>)</span>  = <span class="mxinfo " id="T6:U83">inf</span></span>;      </span></span>
<span class="srcline"><span class="lineno"><a href="78,101" id="srcline101">101</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="78,102" id="srcline102">102</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
