<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="129,74" id="srcline74"> 74</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="129,75" id="srcline75"> 75</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S37T114U406">idxx</span> = assignClosestCorners(<span class="var type1" id="S38T5U409">cand</span>,<span class="var type1" id="S39T6U410">pred</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="129,76" id="srcline76"> 76</a></span><span class="line">   </span></span>
<span class="srcline"><span class="lineno"><a href="129,77" id="srcline77"> 77</a></span><span class="line">    <span class="comment">% return error if not enough candidates are available</span></span></span>
<span class="srcline"><span class="lineno"><a href="129,78" id="srcline78"> 78</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T10:U4"><span class="mxinfo " id="T8:U5">size(<span class="var type1" id="S38T5U416">cand</span>,1)</span>&lt;<span class="mxinfo " id="T8:U7">size(<span class="var type1" id="S39T6U420">pred</span>,1)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="129,79" id="srcline79"> 79</a></span><span class="line">      <span class="mxinfo " id="T114:U9"><span class="var type1" id="S37T114U424">idxx</span> = <span class="mxinfo " id="T8:U11">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="129,80" id="srcline80"> 80</a></span><span class="line">      <span class="keyword">return</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="129,81" id="srcline81"> 81</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="129,82" id="srcline82"> 82</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="129,83" id="srcline83"> 83</a></span><span class="line">    <span class="comment">% build distance matrix</span></span></span>
<span class="srcline"><span class="lineno"><a href="129,84" id="srcline84"> 84</a></span><span class="line">    <span class="mxinfo " id="T1:U12"><span class="var type1" id="S41T1U429">D</span> = <span class="mxinfo " id="T1:U14">zeros(<span class="mxinfo " id="T8:U15">size(<span class="var type1" id="S38T5U434">cand</span>,1)</span>,<span class="mxinfo " id="T8:U17">size(<span class="var type1" id="S39T6U438">pred</span>,1)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="129,85" id="srcline85"> 85</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="129,86" id="srcline86"> 86</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S43T8U442">i</span>=<span class="mxinfo " id="T8:U20">1</span>:size(<span class="var type1" id="S39T6U447">pred</span>,1)</span></span>
<span class="srcline"><span class="lineno"><a href="129,87" id="srcline87"> 87</a></span><span class="line">      <span class="mxinfo " id="T6:U22"><span class="var type1" id="S44T6U451">delta</span>  = <span class="mxinfo " id="T6:U24"><span class="var type1" id="S38T5U453">cand</span>-<span class="mxinfo " id="T6:U26"><span class="mxinfo " id="T7:U27">ones(<span class="mxinfo " id="T8:U28">size(<span class="var type1" id="S38T5U459">cand</span>,1)</span>,1)</span>*<span class="mxinfo " id="T51:U30"><span class="var type1" id="S39T6U463">pred</span>(<span class="var type1" id="S43T8U464">i</span>,<span class="mxinfo " id="T48:U33">:</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="129,88" id="srcline88"> 88</a></span><span class="line">      <span class="mxinfo " id="T7:U34"><span class="mxinfo " id="T7:U35"><span class="var type1" id="S41T1U469">D</span>(<span class="mxinfo " id="T93:U37">:</span>,<span class="var type1" id="S43T8U471">i</span>)</span> = <span class="mxinfo " id="T7:U39">sqrt(<span class="mxinfo " id="T7:U40"><span class="mxinfo " id="T7:U41"><span class="mxinfo " id="T7:U42"><span class="var type1" id="S44T6U477">delta</span>(<span class="mxinfo " id="T93:U44">:</span>,<span class="mxinfo " id="T29:U45">1</span>)</span>.^2</span>+<span class="mxinfo " id="T7:U46"><span class="mxinfo " id="T7:U47"><span class="var type1" id="S44T6U483">delta</span>(<span class="mxinfo " id="T93:U49">:</span>,<span class="mxinfo " id="T29:U50">2</span>)</span>.^2</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="129,89" id="srcline89"> 89</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="129,90" id="srcline90"> 90</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="129,91" id="srcline91"> 91</a></span><span class="line">    <span class="mxinfo " id="T114:U51"><span class="var type1" id="S37T114U489">idxx</span>=<span class="mxinfo " id="T114:U53">zeros(<span class="mxinfo " id="T8:U54">1</span>,<span class="mxinfo " id="T8:U55">size(<span class="var type1" id="S39T6U495">pred</span>,1)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="129,92" id="srcline92"> 92</a></span><span class="line">    coder.varsize(<span class="string">'idxx'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="129,93" id="srcline93"> 93</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="129,94" id="srcline94"> 94</a></span><span class="line">    <span class="comment">% search greedily for closest corners</span></span></span>
<span class="srcline"><span class="lineno"><a href="129,95" id="srcline95"> 95</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S43T8U505">i</span>=<span class="mxinfo " id="T8:U58">1</span>:size(<span class="var type1" id="S39T6U510">pred</span>,1)</span></span>
<span class="srcline"><span class="lineno"><a href="129,96" id="srcline96"> 96</a></span><span class="line">      [<span class="var type1" id="S48T117U515">row</span>, <span class="var type1" id="S49T117U516">col</span>] = find(<span class="mxinfo " id="T142:U62"><span class="var type1" id="S41T1U520">D</span>==<span class="mxinfo " id="T8:U64">min(<span class="mxinfo " id="T7:U65"><span class="var type1" id="S41T1U524">D</span>(:)</span>)</span></span>,1,<span class="string">'first'</span>); <span class="comment">%Locate the first one nonzero. </span></span></span>
<span class="srcline"><span class="lineno"><a href="129,97" id="srcline97"> 97</a></span><span class="line">      </span></span>
<span class="srcline"><span class="lineno"><a href="129,98" id="srcline98"> 98</a></span><span class="line">      <span class="mxinfo " id="T117:U67"><span class="mxinfo " id="T117:U68"><span class="var type1" id="S37T114U531">idxx</span>(<span class="var type1" id="S49T117U532">col</span>)</span>  = <span class="var type1" id="S48T117U533">row</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="129,99" id="srcline99"> 99</a></span><span class="line">      <span class="mxinfo " id="T150:U72"><span class="mxinfo " id="T150:U73"><span class="var type1" id="S41T1U537">D</span>(<span class="var type1" id="S48T117U538">row</span>,<span class="mxinfo " id="T93:U76">:</span>)</span>  = <span class="mxinfo " id="T8:U77">inf</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="129,100" id="srcline100">100</a></span><span class="line">      <span class="mxinfo " id="T151:U78"><span class="mxinfo " id="T151:U79"><span class="var type1" id="S41T1U545">D</span>(<span class="mxinfo " id="T93:U81">:</span>,<span class="var type1" id="S49T117U547">col</span>)</span>  = <span class="mxinfo " id="T8:U83">inf</span></span>;      </span></span>
<span class="srcline"><span class="lineno"><a href="129,101" id="srcline101">101</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="129,102" id="srcline102">102</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
